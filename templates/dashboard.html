<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Integrated Pollution Monitoring and Control System - Smart City Dashboard">
    <title>Pollution Monitoring System - Dashboard</title>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>

<body>
    <div class="app-container">
        <!-- Sidebar Navigation -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="sidebar-logo">
                    <span class="logo-icon">üåç</span>
                    <h1>Pollution Monitor<small>Smart City System</small></h1>
                </div>
            </div>
            <nav class="sidebar-nav">
                <a href="{{ url_for('dashboard') }}" class="nav-item active">
                    <span class="nav-icon">üìä</span>
                    <span class="nav-text">Dashboard</span>
                </a>
                <a href="{{ url_for('air_pollution') }}" class="nav-item">
                    <span class="nav-icon">üå´Ô∏è</span>
                    <span class="nav-text">Air Pollution</span>
                </a>
                <a href="{{ url_for('water_pollution') }}" class="nav-item">
                    <span class="nav-icon">üíß</span>
                    <span class="nav-text">Water Pollution</span>
                </a>
                <a href="{{ url_for('noise_pollution') }}" class="nav-item">
                    <span class="nav-icon">üîä</span>
                    <span class="nav-text">Noise Pollution</span>
                </a>
                <a href="{{ url_for('compare_page') }}" class="nav-item">
                    <span class="nav-icon">üìà</span>
                    <span class="nav-text">City Comparison</span>
                </a>
                <a href="{{ url_for('analytics') }}" class="nav-item">
                    <span class="nav-icon">üìâ</span>
                    <span class="nav-text">Analytics</span>
                </a>
                <a href="{{ url_for('reports') }}" class="nav-item">
                    <span class="nav-icon">üìã</span>
                    <span class="nav-text">Reports</span>
                </a>
            </nav>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Page Header -->
            <header class="page-header">
                <div>
                    <h1 class="page-title">Pollution Monitoring Dashboard</h1>
                    <p class="page-subtitle">Real-time pollution analysis for <strong id="currentLocationName">{{
                            selected_city }}</strong></p>
                </div>
                <div class="page-actions">
                    <!-- Location Button -->
                    <button id="locationBtn" class="btn btn-location" onclick="getMyLocation()"
                        title="Get pollution data for your current location">
                        <span id="locationIcon">üìç</span>
                        <span id="locationBtnText">Use My Location</span>
                    </button>
                    <div class="city-selector">
                        <select id="citySelector" onchange="changeCity(this.value)">
                            {% for city in cities %}
                            <option value="{{ city.city }}" {% if city.city==selected_city %}selected{% endif %}>
                                {{ city.city }}, {{ city.state }}
                            </option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="current-time">
                        <span>üïê</span>
                        <span id="currentTime">Loading...</span>
                    </div>
                </div>
            </header>

            <!-- Location Pollution Card (hidden by default) -->
            <div id="locationPollutionCard" class="location-pollution-card" style="display: none;">
                <div class="location-card-header">
                    <h3>üìç Your Location - Real-time Air Quality</h3>
                    <button class="close-btn" onclick="hideLocationCard()">‚úï</button>
                </div>
                <div class="location-card-body">
                    <div class="location-info">
                        <span id="locationCoords"></span>
                    </div>
                    <div class="location-aqi-display">
                        <div class="aqi-value-box" id="locationAqiBox">
                            <span class="aqi-number" id="locationAqi">--</span>
                            <span class="aqi-label" id="locationAqiLevel">Loading...</span>
                        </div>
                    </div>
                    <div class="location-pollutants">
                        <div class="pollutant-item">
                            <span class="pollutant-label">PM2.5</span>
                            <span class="pollutant-value" id="locationPm25">--</span>
                            <span class="pollutant-unit">Œºg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="pollutant-label">PM10</span>
                            <span class="pollutant-value" id="locationPm10">--</span>
                            <span class="pollutant-unit">Œºg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="pollutant-label">NO‚ÇÇ</span>
                            <span class="pollutant-value" id="locationNo2">--</span>
                            <span class="pollutant-unit">Œºg/m¬≥</span>
                        </div>
                        <div class="pollutant-item">
                            <span class="pollutant-label">O‚ÇÉ</span>
                            <span class="pollutant-value" id="locationO3">--</span>
                            <span class="pollutant-unit">Œºg/m¬≥</span>
                        </div>
                    </div>
                    <div class="health-advisory" id="healthAdvisory"></div>
                    <div class="location-timestamp" id="locationTimestamp"></div>
                </div>
            </div>

            <!-- Summary Cards -->
            <section class="summary-grid">
                <!-- Air Quality Card -->
                <div class="summary-card air">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Air Quality Index</span>
                        <span class="summary-card-icon">üå´Ô∏è</span>
                    </div>
                    {% if latest_air %}
                    <div class="summary-card-value">{{ latest_air.aqi or 'N/A' }}</div>
                    <div class="summary-card-label">
                        <span
                            class="status-badge {{ latest_air.level|lower|replace(' ', '-') if latest_air.level else 'moderate' }}">
                            {{ latest_air.level or 'Calculating' }}
                        </span>
                    </div>
                    {% else %}
                    <div class="summary-card-value">--</div>
                    <div class="summary-card-label">No data available</div>
                    {% endif %}
                    <div class="chart-container" style="height: 80px; margin-top: 15px;">
                        <canvas id="airMiniChart"></canvas>
                    </div>
                </div>

                <!-- Water Quality Card -->
                <div class="summary-card water">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Water Quality</span>
                        <span class="summary-card-icon">üíß</span>
                    </div>
                    {% if latest_water %}
                    <div class="summary-card-value">pH {{ latest_water.ph }}</div>
                    <div class="summary-card-label">
                        <span
                            class="status-badge {{ latest_water.quality|lower if latest_water.quality else 'moderate' }}">
                            {{ latest_water.quality or 'Unknown' }}
                        </span>
                    </div>
                    {% else %}
                    <div class="summary-card-value">--</div>
                    <div class="summary-card-label">No data available</div>
                    {% endif %}
                    <div class="chart-container" style="height: 80px; margin-top: 15px;">
                        <canvas id="waterMiniChart"></canvas>
                    </div>
                </div>

                <!-- Noise Level Card -->
                <div class="summary-card noise">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Noise Level</span>
                        <span class="summary-card-icon">üîä</span>
                    </div>
                    {% if latest_noise %}
                    <div class="summary-card-value">{{ latest_noise.sound_level }} dB</div>
                    <div class="summary-card-label">
                        <span class="status-badge {{ latest_noise.level|lower if latest_noise.level else 'medium' }}">
                            {{ latest_noise.level or 'Unknown' }}
                        </span>
                        <span style="margin-left: 10px; color: var(--text-muted);">{{ latest_noise.zone }}</span>
                    </div>
                    {% else %}
                    <div class="summary-card-value">--</div>
                    <div class="summary-card-label">No data available</div>
                    {% endif %}
                    <div class="chart-container" style="height: 80px; margin-top: 15px;">
                        <canvas id="noiseMiniChart"></canvas>
                    </div>
                </div>

                <!-- Alerts Summary Card -->
                <div class="summary-card alerts">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Active Alerts</span>
                        <span class="summary-card-icon">‚ö†Ô∏è</span>
                    </div>
                    <div class="summary-card-value">{{ alert_summary.total }}</div>
                    <div class="summary-card-label">
                        {% if alert_summary.by_severity.CRITICAL > 0 %}
                        <span class="status-badge severe">{{ alert_summary.by_severity.CRITICAL }} Critical</span>
                        {% endif %}
                        {% if alert_summary.by_severity.DANGER > 0 %}
                        <span class="status-badge very-poor">{{ alert_summary.by_severity.DANGER }} Danger</span>
                        {% endif %}
                        {% if alert_summary.by_severity.WARNING > 0 %}
                        <span class="status-badge moderate">{{ alert_summary.by_severity.WARNING }} Warning</span>
                        {% endif %}
                        {% if alert_summary.total == 0 %}
                        <span class="status-badge good">All Clear</span>
                        {% endif %}
                    </div>
                </div>
            </section>

            <!-- Main Content Grid -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <!-- Air Quality Trend Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <span class="card-icon">üìà</span>
                            Air Quality Trend
                        </h3>
                        <a href="{{ url_for('air_pollution') }}" class="btn btn-sm btn-secondary">View Details</a>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="airTrendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Alerts Panel -->
                <div class="alerts-panel">
                    <div class="alerts-header">
                        <h3>üö® Active Alerts</h3>
                        <span class="alert-count">{{ alerts|length }} alerts</span>
                    </div>
                    <div class="alerts-list">
                        {% if alerts %}
                        {% for alert in alerts %}
                        <div class="alert-item fade-in">
                            <div class="alert-icon {{ alert.severity|lower }}">
                                {% if alert.type == 'AIR' %}üå´Ô∏è
                                {% elif alert.type == 'WATER' %}üíß
                                {% else %}üîä{% endif %}
                            </div>
                            <div class="alert-content">
                                <div class="alert-title">{{ alert.title }}</div>
                                <div class="alert-message">{{ alert.message }}</div>
                                <div class="alert-time">{{ alert.timestamp }}</div>
                                {% if alert.recommendations %}
                                <div class="alert-recommendations">
                                    <h5>Recommendations:</h5>
                                    <ul>
                                        {% for rec in alert.recommendations[:3] %}
                                        <li>{{ rec }}</li>
                                        {% endfor %}
                                    </ul>
                                </div>
                                {% endif %}
                            </div>
                        </div>
                        {% endfor %}
                        {% else %}
                        <div class="no-alerts">
                            <div class="no-alerts-icon">‚úÖ</div>
                            <p>No active alerts. All pollution levels are within safe limits.</p>
                        </div>
                        {% endif %}
                    </div>
                </div>
            </div>

            <!-- Water and Noise Charts Row -->
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
                <!-- Water Quality Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <span class="card-icon">üíß</span>
                            Water Quality Parameters
                        </h3>
                        <a href="{{ url_for('water_pollution') }}" class="btn btn-sm btn-secondary">View Details</a>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="waterTrendChart"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Noise Levels Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">
                            <span class="card-icon">üîä</span>
                            Noise Levels by Zone
                        </h3>
                        <a href="{{ url_for('noise_pollution') }}" class="btn btn-sm btn-secondary">View Details</a>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="noiseTrendChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Footer -->
            <footer
                style="text-align: center; padding: 30px 0; color: var(--text-muted); margin-top: 30px; border-top: 1px solid var(--border-color);">
                <p>Integrated Pollution Monitoring and Control System &copy; 2026</p>
                <p style="font-size: 0.85rem;">MCA Final Year Project - Smart City Initiative</p>
            </footer>
        </main>
    </div>

    <!-- JavaScript -->
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <script>
        // Parse chart data from Flask
        const airChartData = {{ air_chart_data| safe }};
        const waterChartData = {{ water_chart_data| safe }};
        const noiseChartData = {{ noise_chart_data| safe }};

        // Initialize charts when DOM is ready
        document.addEventListener('DOMContentLoaded', function () {
            // Dashboard mini charts
            renderDashboardCharts(airChartData, waterChartData, noiseChartData);

            // Air trend chart
            if (airChartData.length > 0) {
                const airCtx = document.getElementById('airTrendChart');
                if (airCtx) {
                    new Chart(airCtx, {
                        type: 'line',
                        data: {
                            labels: airChartData.map(d => d.date),
                            datasets: [{
                                label: 'AQI',
                                data: airChartData.map(d => d.aqi),
                                borderColor: '#3498db',
                                backgroundColor: 'rgba(52, 152, 219, 0.1)',
                                borderWidth: 2,
                                fill: true,
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'top' }
                            }
                        }
                    });
                }
            }

            // Water trend chart
            if (waterChartData.length > 0) {
                const waterCtx = document.getElementById('waterTrendChart');
                if (waterCtx) {
                    new Chart(waterCtx, {
                        type: 'line',
                        data: {
                            labels: waterChartData.map(d => d.date),
                            datasets: [
                                {
                                    label: 'pH',
                                    data: waterChartData.map(d => d.ph),
                                    borderColor: '#2ecc71',
                                    borderWidth: 2,
                                    fill: false,
                                    tension: 0.4
                                },
                                {
                                    label: 'DO (mg/L)',
                                    data: waterChartData.map(d => d.dissolved_oxygen),
                                    borderColor: '#3498db',
                                    borderWidth: 2,
                                    fill: false,
                                    tension: 0.4
                                }
                            ]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'top' }
                            }
                        }
                    });
                }
            }

            // Noise trend chart
            if (noiseChartData.length > 0) {
                const noiseCtx = document.getElementById('noiseTrendChart');
                if (noiseCtx) {
                    const colors = noiseChartData.map(d => {
                        if (d.sound_level < 55) return '#28a745';
                        if (d.sound_level < 75) return '#ffc107';
                        return '#dc3545';
                    });

                    new Chart(noiseCtx, {
                        type: 'bar',
                        data: {
                            labels: noiseChartData.map(d => d.date),
                            datasets: [{
                                label: 'Sound Level (dB)',
                                data: noiseChartData.map(d => d.sound_level),
                                backgroundColor: colors,
                                borderWidth: 0
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { position: 'top' }
                            },
                            scales: {
                                y: {
                                    beginAtZero: true,
                                    max: 120
                                }
                            }
                        }
                    });
                }
            }
        });

        // City change function
        function changeCity(city) {
            window.location.href = '/?city=' + encodeURIComponent(city);
        }

        // ==========================================
        // GEOLOCATION FUNCTIONS
        // ==========================================

        /**
         * Get user's current location and fetch pollution data
         */
        function getMyLocation() {
            const btn = document.getElementById('locationBtn');
            const btnText = document.getElementById('locationBtnText');
            const icon = document.getElementById('locationIcon');

            // Check if geolocation is supported
            if (!navigator.geolocation) {
                alert('Geolocation is not supported by your browser. Please use a modern browser.');
                return;
            }

            // Update button to loading state
            btn.disabled = true;
            icon.textContent = '‚è≥';
            btnText.textContent = 'Getting Location...';
            btn.classList.add('loading');

            // Request location
            navigator.geolocation.getCurrentPosition(
                // Success callback
                function (position) {
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    console.log('Location obtained:', lat, lon);

                    btnText.textContent = 'Fetching Data...';
                    fetchLocationPollution(lat, lon);
                },
                // Error callback
                function (error) {
                    btn.disabled = false;
                    icon.textContent = 'üìç';
                    btnText.textContent = 'Use My Location';
                    btn.classList.remove('loading');

                    let message = 'Unable to get your location. ';
                    switch (error.code) {
                        case error.PERMISSION_DENIED:
                            message += 'Please allow location access in your browser settings.';
                            break;
                        case error.POSITION_UNAVAILABLE:
                            message += 'Location information is unavailable.';
                            break;
                        case error.TIMEOUT:
                            message += 'Location request timed out.';
                            break;
                        default:
                            message += 'An unknown error occurred.';
                    }
                    alert(message);
                },
                // Options
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 0
                }
            );
        }

        /**
         * Fetch pollution data for given coordinates
         */
        async function fetchLocationPollution(lat, lon) {
            const btn = document.getElementById('locationBtn');
            const btnText = document.getElementById('locationBtnText');
            const icon = document.getElementById('locationIcon');

            try {
                const response = await fetch(`/api/location-pollution?lat=${lat}&lon=${lon}`);
                const data = await response.json();

                if (data.success) {
                    updateLocationUI(data);
                    btn.classList.remove('loading');
                    btn.classList.add('active');
                    icon.textContent = '‚úì';
                    btnText.textContent = 'Location Active';
                } else {
                    throw new Error(data.error || 'Failed to fetch pollution data');
                }
            } catch (error) {
                console.error('Error fetching location pollution:', error);
                alert('Failed to fetch pollution data for your location. Please try again.');

                icon.textContent = 'üìç';
                btnText.textContent = 'Use My Location';
                btn.classList.remove('loading');
            }

            btn.disabled = false;
        }

        /**
         * Update UI with location pollution data
         */
        function updateLocationUI(data) {
            // Show the location card
            const card = document.getElementById('locationPollutionCard');
            card.style.display = 'block';
            card.classList.add('fade-in');

            // Update location name
            document.getElementById('currentLocationName').textContent = data.location_name || 'Your Location';

            // Update coordinates
            const coords = data.coordinates;
            document.getElementById('locationCoords').textContent =
                `üìç ${coords.lat.toFixed(4)}¬∞N, ${coords.lon.toFixed(4)}¬∞E`;

            // Update AQI display
            const aqi = data.aqi || 0;
            const aqiLevel = data.aqi_level || 'Unknown';
            document.getElementById('locationAqi').textContent = aqi;
            document.getElementById('locationAqiLevel').textContent = aqiLevel;

            // Set AQI box color
            const aqiBox = document.getElementById('locationAqiBox');
            if (data.health_advisory && data.health_advisory.color) {
                aqiBox.style.backgroundColor = data.health_advisory.color;
            }

            // Update pollutant values
            document.getElementById('locationPm25').textContent = data.pm25 || '--';
            document.getElementById('locationPm10').textContent = data.pm10 || '--';
            document.getElementById('locationNo2').textContent = data.no2 || '--';
            document.getElementById('locationO3').textContent = data.o3 || '--';

            // Update health advisory
            const advisory = data.health_advisory;
            if (advisory) {
                const advisoryHtml = `
                    <div class="advisory-message" style="border-left: 4px solid ${advisory.color};">
                        <strong>${advisory.level}:</strong> ${advisory.message}
                        ${advisory.precautions && advisory.precautions.length > 0 ? `
                            <ul class="precautions-list">
                                ${advisory.precautions.map(p => `<li>${p}</li>`).join('')}
                            </ul>
                        ` : ''}
                    </div>
                `;
                document.getElementById('healthAdvisory').innerHTML = advisoryHtml;
            }

            // Update timestamp
            document.getElementById('locationTimestamp').textContent =
                `Last updated: ${data.timestamp} | Source: ${data.source}`;

            // Scroll to the card
            card.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }

        /**
         * Hide location pollution card
         */
        function hideLocationCard() {
            const card = document.getElementById('locationPollutionCard');
            card.style.display = 'none';

            // Reset button
            const btn = document.getElementById('locationBtn');
            const btnText = document.getElementById('locationBtnText');
            const icon = document.getElementById('locationIcon');

            btn.classList.remove('active');
            icon.textContent = 'üìç';
            btnText.textContent = 'Use My Location';

            // Reset location name to selected city
            const citySelector = document.getElementById('citySelector');
            document.getElementById('currentLocationName').textContent = citySelector.value;
        }
    </script>

    <!-- Location Feature Styles -->
    <style>
        .btn-location {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 0.9rem;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        .btn-location:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        .btn-location:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .btn-location.loading {
            animation: pulse 1.5s infinite;
        }

        .btn-location.active {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
            box-shadow: 0 4px 15px rgba(40, 167, 69, 0.4);
        }

        @keyframes pulse {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0.6;
            }
        }

        .location-pollution-card {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.1);
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .location-card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .location-card-header h3 {
            color: #fff;
            margin: 0;
            font-size: 1.3rem;
        }

        .close-btn {
            background: rgba(255, 255, 255, 0.1);
            border: none;
            color: #fff;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            transition: all 0.3s ease;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: rotate(90deg);
        }

        .location-info {
            text-align: center;
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 20px;
            font-size: 0.95rem;
        }

        .location-aqi-display {
            display: flex;
            justify-content: center;
            margin-bottom: 25px;
        }

        .location-aqi-display .aqi-value-box {
            padding: 20px 40px;
            border-radius: 15px;
            text-align: center;
            min-width: 150px;
        }

        .location-aqi-display .aqi-number {
            display: block;
            font-size: 3rem;
            font-weight: 800;
            color: #fff;
        }

        .location-aqi-display .aqi-label {
            display: block;
            font-size: 1.1rem;
            color: rgba(255, 255, 255, 0.9);
            margin-top: 5px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .location-pollutants {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin-bottom: 20px;
        }

        .pollutant-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
        }

        .pollutant-label {
            display: block;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }

        .pollutant-value {
            display: block;
            color: #fff;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .pollutant-unit {
            display: block;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.75rem;
        }

        .health-advisory {
            margin-bottom: 15px;
        }

        .advisory-message {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px 20px;
            border-radius: 10px;
            color: rgba(255, 255, 255, 0.9);
        }

        .precautions-list {
            margin: 10px 0 0 20px;
            padding: 0;
            color: rgba(255, 255, 255, 0.7);
        }

        .precautions-list li {
            margin: 5px 0;
        }

        .location-timestamp {
            text-align: center;
            color: rgba(255, 255, 255, 0.4);
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            .location-pollutants {
                grid-template-columns: repeat(2, 1fr);
            }

            .btn-location span:last-child {
                display: none;
            }
        }
    </style>
</body>

</html>